<div class="mb-8">
  <h1 class="text-2xl font-semibold text-white">Batches</h1>
  <p class="text-gray-500 text-sm mt-1">Transaction batches for distributions</p>
</div>

<!-- Filters -->
<form class="bg-dark-700 border border-dark-500 rounded-xl p-4 mb-6 flex flex-wrap gap-3 items-center">
  <select name="status" class="bg-dark-800 border border-dark-500 text-gray-300 text-sm rounded-lg px-3 py-2 focus:border-cyan-500 focus:outline-none">
    <option value="">All Statuses</option>
    <option value="pending" <%= filters.status === 'pending' ? 'selected' : '' %>>Pending</option>
    <option value="processing" <%= filters.status === 'processing' ? 'selected' : '' %>>Processing</option>
    <option value="completed" <%= filters.status === 'completed' ? 'selected' : '' %>>Completed</option>
    <option value="failed" <%= filters.status === 'failed' ? 'selected' : '' %>>Failed</option>
  </select>
  <button type="submit" class="px-4 py-2 bg-cyan-500 hover:bg-cyan-400 text-white text-sm font-medium rounded-lg transition-colors">Filter</button>
</form>

<!-- Table -->
<div class="bg-dark-700 border border-dark-500 rounded-xl overflow-hidden">
  <table class="w-full">
    <thead>
      <tr class="bg-dark-800/50">
        <th class="px-5 py-3 text-left text-xs font-medium text-gray-500 uppercase">Week</th>
        <th class="px-5 py-3 text-left text-xs font-medium text-gray-500 uppercase">Batch #</th>
        <th class="px-5 py-3 text-left text-xs font-medium text-gray-500 uppercase">Recipients</th>
        <th class="px-5 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
        <th class="px-5 py-3 text-left text-xs font-medium text-gray-500 uppercase">TxHash</th>
        <th class="px-5 py-3 text-left text-xs font-medium text-gray-500 uppercase">Actions</th>
      </tr>
    </thead>
    <tbody class="divide-y divide-dark-600">
      <% batches.forEach(b => { %>
      <tr class="hover:bg-dark-600/30 transition-colors">
        <td class="px-5 py-3 font-mono text-sm text-white"><%= b.weekId %></td>
        <td class="px-5 py-3 text-sm text-gray-300 font-medium">#<%= b.batchNumber %></td>
        <td class="px-5 py-3 text-sm text-gray-300"><%= b.recipientCount %></td>
        <td class="px-5 py-3">
          <span class="px-2 py-0.5 text-xs rounded-full
            <%= b.status === 'completed' ? 'bg-emerald-500/20 text-emerald-400' :
               b.status === 'failed' ? 'bg-red-500/20 text-red-400' :
               b.status === 'processing' ? 'bg-cyan-500/20 text-cyan-400' :
               'bg-yellow-500/20 text-yellow-400' %>">
            <%= b.status %>
          </span>
        </td>
        <td class="px-5 py-3 font-mono text-xs text-gray-500"><%= b.execution?.txHash ? b.execution.txHash.slice(0,10) + '...' : '—' %></td>
        <td class="px-5 py-3">
          <a href="/admin/batches/<%= b._id %>" class="text-sm text-cyan-400 hover:text-cyan-300">View →</a>
        </td>
      </tr>
      <% }) %>
      <% if (batches.length === 0) { %>
      <tr>
        <td colspan="6" class="px-5 py-8 text-center text-gray-500 text-sm">No batches found</td>
      </tr>
      <% } %>
    </tbody>
  </table>
</div>

<% if (pagination.totalPages > 1) { %>
<div class="mt-4 flex justify-center gap-2">
  <% for (let i = 1; i <= pagination.totalPages; i++) { %>
  <a href="?page=<%= i %><%= filters.status ? '&status=' + filters.status : '' %>"
     class="px-3 py-1 text-sm rounded <%= i === pagination.page ? 'bg-cyan-500 text-white' : 'bg-dark-700 text-gray-400 hover:text-white' %>"><%= i %></a>
  <% } %>
</div>
<% } %>
